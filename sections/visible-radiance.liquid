{% comment %}
  Section: Visible radiance (image + info list)
  - Tailwind classes only
  - Desktop: 2 columns (image left, content right)
  - Mobile: stacks (image on top, content below)
{% endcomment %}

<section id="radiance-{{ section.id }}" class="w-full mb-25 lg:mb-30" style="background-color: {{ section.settings.bg | default: '#274b6b' }}">
  <div class="mx-auto section section--page-width py-16">

    <!-- Top row: heading + browse -->
    <div class="flex items-startm flex-col lg:flex-row justify-between gap-5">
      <p class="max-w-[620px] text-[26px] lg:text-[28px] leading-none md:text-[40px] font-[Groteska] font-medium text-white">
        {{ section.settings.heading | default: 'Visible radiance in<br>just 7 days' }}
      </p>

      {% if section.settings.link_url != blank and section.settings.link_label != blank %}
        <a href="{{ section.settings.link_url }}"
           class="flex items-center text-[16px] font-semibold! tracking-wide text-white! underline! decoration-white! underline-offset-4! hover:opacity-90">
          {{ section.settings.link_label }} 
          <svg xmlns="http://www.w3.org/2000/svg" width="11" height="7" viewBox="0 0 11 7" fill="none">
            <path d="M0.450195 2.86372C0.201667 2.86372 0.000195324 3.06519 0.000195324 3.31372C0.000195324 3.56225 0.201667 3.76372 0.450195 3.76372V3.31372V2.86372ZM10.2684 3.63192C10.4441 3.45618 10.4441 3.17126 10.2684 2.99552L7.40461 0.13174C7.22888 -0.0439956 6.94395 -0.0439956 6.76821 0.13174C6.59248 0.307476 6.59248 0.592401 6.76821 0.768136L9.3138 3.31372L6.76821 5.85931C6.59248 6.03504 6.59248 6.31997 6.76821 6.4957C6.94395 6.67144 7.22888 6.67144 7.40461 6.4957L10.2684 3.63192ZM0.450195 3.31372V3.76372H9.9502V3.31372V2.86372H0.450195V3.31372Z" fill="white"/>
          </svg>
        </a>
      {% endif %}
    </div>

    <!-- Main body -->
    <div class="mt-10 md:mt-8 d-grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10">

      <!-- Left: image -->
      <div class="w-full">
        <div class="relative rounded-[18px] overflow-hidden ring-1 ring-white/10 shadow-[0_10px_30px_rgba(0,0,0,0.25)]">
          {% if section.settings.image %}
            <img
              src="{{ section.settings.image | image_url: width: 1400 }}"
              srcset="
                {{ section.settings.image | image_url: width: 640 }} 640w,
                {{ section.settings.image | image_url: width: 960 }} 960w,
                {{ section.settings.image | image_url: width: 1280 }} 1280w,
                {{ section.settings.image | image_url: width: 1400 }} 1400w
              "
              sizes="(min-width: 768px) 50vw, 100vw"
              alt="{{ section.settings.image_alt | escape }}"
              width="{{ section.settings.image.width }}"
              height="{{ section.settings.image.height }}"
              class="desktop_screen w-full h-auto object-cover">
          {% else %}
            <div class="aspect-4/3 bg-white/10"></div>
          {% endif %}
          {% if section.settings.image_mobile %}
            <img
              src="{{ section.settings.image_mobile | image_url: width: 1400 }}"
              srcset="
                {{ section.settings.image_mobile | image_url: width: 640 }} 640w,
                {{ section.settings.image_mobile | image_url: width: 960 }} 960w,
                {{ section.settings.image_mobile | image_url: width: 1280 }} 1280w,
                {{ section.settings.image_mobile | image_url: width: 1400 }} 1400w
              "
              sizes="(min-width: 768px) 50vw, 100vw"
              alt="{{ section.settings.image_alt_mobile | escape }}"
              width="{{ section.settings.image_mobile.width }}"
              height="{{ section.settings.image_mobile.height }}"
              class="mobile_screen w-full h-auto object-cover">
          {% else %}
            <div class="aspect-4/3 bg-white/10"></div>
          {% endif %}
        </div>
      </div>

      <!-- Right: info list -->
      <div class="w-full">
        <div class="py-4 md:p-6 text-white">
          {% comment %} {% if section.settings.link_url != blank and section.settings.link_label != blank %}
            <a href="{{ section.settings.link_url }}"
               class="md:hidden inline-flex mb-3 text-[12px] font-extrabold tracking-wide underline underline-offset-4">
              {{ section.settings.link_label }} â†’
            </a>
          {% endif %} {% endcomment %}

          <ul id="acc-{{ section.id }}" class="border-y border-[#6D99C0]">
            {% for block in section.blocks %}
              {% assign b = block.settings %}
              {% assign is_open = forloop.first %} 
              <div class="border-b border-[#6D99C0]">
                <button onclick="toggleAccordion({{ forloop.index }})" class="w-full flex flex-col py-5">
                  {% if b.badge != blank %}
                    <span class="shrink-0 inline-flex w-max items-center rounded-full {% if is_open %}bg-[#F9BDF9]{% else %}bg-[#799DBF]{% endif %} text-black px-2.5 py-1.5 text-[12px] font-medium leading-none">
                      {{ b.badge }}
                    </span>
                  {% endif %}
                  <div class="flex justify-between items-center">
                    <span class="text-[15px] whitespace-nowrap md:text-[18px] font-[Groteska] font-medium leading-snug text-white">{{ b.title }}</span>
                  <span id="icon-{{ forloop.index }}" class="transition-transform duration-300">
                    {% if is_open %}
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
                      <path d="M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z"></path>
                    </svg>
                    {% else %}
                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
                      <path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
                    </svg>
                    {% endif %}
                  </span>
                  </div>
                </button>
            <div id="content-{{ forloop.index }}" class="max-h-0 overflow-hidden transition-all duration-300 ease-in-out"{% if is_open %} style="max-height: 200px;"{% endif %}>
                  <div class="pb-3 md:pb-5 ml-5 text-[12px] md:text-[14px] text-[#C4E0F8] leading-relaxed max-w-60">
                    {{ b.desc }}
                  </div>
                </div>
              </div>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>
<script>
  function toggleAccordion(index) {
    const content = document.getElementById(`content-${index}`);
    const icon = document.getElementById(`icon-${index}`);
 
    // SVG for Minus icon
    const minusSVG = `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
        <path d="M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z" />
      </svg>
    `;
 
    // SVG for Plus icon
    const plusSVG = `
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
        <path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z" />
      </svg>
    `;
 
    // Toggle the content's max-height for smooth opening and closing
    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
      content.style.maxHeight = '0';
      icon.innerHTML = plusSVG;
    } else {
      content.style.maxHeight = content.scrollHeight + 'px';
      icon.innerHTML = minusSVG;
    }
  }
</script>


{% schema %}
{
  "name": "Visible radiance",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading (supports <br>)", "default": "Visible radiance in<br>just 7 days" },
    { "type": "image_picker", "id": "image", "label": "Left image Desktop" },
    { "type": "text", "id": "image_alt", "label": "Image alt", "default": "Before / After skin" },
    { "type": "image_picker", "id": "image_mobile", "label": "Left image Mobile" },
    { "type": "text", "id": "image_alt_mobile", "label": "Image alt", "default": "Before / After skin" },
    { "type": "url", "id": "link_url", "label": "Browse all link URL" },
    { "type": "text", "id": "link_label", "label": "Browse all label", "default": "BROWSE ALL" },
    { "type": "color", "id": "bg", "label": "Background color", "default": "#274b6b" }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Info row",
      "settings": [
        { "type": "text", "id": "badge", "label": "Badge (e.g. '7 days')", "default": "7 days" },
        { "type": "text", "id": "title", "label": "Title", "default": "Visibly Brightens Skin" },
        { "type": "textarea", "id": "desc", "label": "Description (multi-line allowed)", "default": "Reduces tan and dullness\nInstantly improves clarity and softness\nSkin feels smoother and refreshed" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Visible radiance",
      "blocks": [
        { "type": "row" },
        { "type": "row", "settings": { "badge": "4 weeks", "title": "Refines Texture + Restores Balance" } },
        { "type": "row", "settings": { "badge": "3 months", "title": "Long-Term Brightness + Barrier Strength" } }
      ]
    }
  ]
}
{% endschema %}
