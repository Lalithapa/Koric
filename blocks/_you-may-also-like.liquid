{% comment %}
  Section: You may also like (Horizon blocks)
  - One block = one product row
  - Tailwind classes
{% endcomment %}

<section id="ymal-{{ section.id }}" class="w-full bg-[#F8F5F1]">
  <div class="mx-auto w-full">
    {% if block.settings.heading != blank %}
      <p class="text-[14px] md:text-[16px] font-medium text-[#0F172A] mb-4">
        {{ block.settings.heading }}
      </p>
    {% endif %}
    <div class="space-y-4">
      {% comment %} {% for block in section.blocks %} {% endcomment %}
        {% assign p = block.settings.product %}
        {% if p %}
          {% assign variant = p.selected_or_first_available_variant %}
          <div class="rounded-[12px] bg-[#DDEFFF]/70 ring-1 ring-black/5 shadow-[0_2px_10px_rgba(0,0,0,0.05)] p-4 md:p-5" {{ block.shopify_attributes }}>
            <div class="flex items-center gap-4 md:gap-5">
              <!-- Thumbnail -->
              <a href="{{ p.url }}" class="shrink-0 w-[90px] h-[90px] overflow-hidden">
                {% if p.featured_image %}
                  <img
                    src="{{ p.featured_image | image_url: width: 90, height: 90, crop: 'center' }}"
                    alt="{{ p.featured_image.alt | default: p.title | escape }}"
                    width="90" height="90"
                    class="w-full h-full object-cover mix-blend-multiply" loading="lazy">
                {% else %}
                  <div class="w-full h-full bg-slate-100"></div>
                {% endif %}
              </a>

              <!-- Text -->
              <div class="flex-1 min-w-0">
                <a href="{{ p.url }}" class="block text-[18px] md:text-[20px] font-semibold text-[#0B2944] truncate">
                  {{ p.title }}
                </a>
                {% if block.settings.subtitle != blank %}
                  <p class="mt-0.5 text-[11px] md:text-[12px] tracking-wide text-[#0B2944]/70 uppercase">
                    {{ block.settings.subtitle }}
                  </p>
                {% endif %}
                <div class="mt-2 text-[16px] md:text-[18px] font-bold text-[#0B2944]">
                  {{ variant.price | money_without_trailing_zeros }}
                </div>
              </div>

              <!-- Add button -->
              <div class="shrink-0">
                {% if variant.available %}
                  <form method="post" action="/cart/add" class="m-0 p-0">
                    <input type="hidden" name="id" value="{{ variant.id }}">
                    <input type="hidden" name="quantity" value="1">
                    <button type="submit"
                      class="inline-flex items-center gap-2 rounded-full bg-[#1F3B63] text-white px-4 md:px-5 py-2 text-[14px] font-semibold hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#1F3B63] transition">
                      <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 13 13" fill="none">
                        <path d="M0.51709 6.21118H11.9051" stroke="white" stroke-width="1.034" stroke-linecap="round"/>
                        <path d="M6.21094 11.905V0.51703" stroke="white" stroke-width="1.034" stroke-linecap="round"/>
                      </svg>
                      <span>Add</span>
                    </button>
                  </form>
                {% else %}
                  <button type="button" disabled
                    class="inline-flex items-center gap-2 rounded-full bg-gray-300 text-gray-600 px-4 md:px-5 py-2 text-[14px] font-semibold cursor-not-allowed">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Sold out</span>
                  </button>
                {% endif %}
              </div>
            </div>
          </div>

        {% endif %}
      {% comment %} {% endfor %} {% endcomment %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "You may also like (list)",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "You may also like" },
    { "type": "product", "id": "product", "label": "Product" },
  ],
  "presets": [
    { "name": "You may also like (list)" }
  ]
}
{% endschema %}
