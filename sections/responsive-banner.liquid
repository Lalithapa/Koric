<section id="banner-{{ section.id }}" class="w-full">
  <div class="mx-auto">
    {% for block in section.blocks %}
      {% assign b = block.settings %}
      {% if b.desktop_image or b.mobile_image %}
          <div {{ block.shopify_attributes }}>
            <a href="{{ b.link }}" target="{{ b.link_target }}" class="block overflow-hidden rounded-xl">
              <picture>
                {% if b.mobile_image %}
                  <source media="(max-width: 767px)" srcset="{{ b.mobile_image | image_url: width: 1200 }}">
                {% endif %}
                <img
                  src="{{ b.desktop_image | image_url: width: 2000 }}"
                  alt="{{ b.alt | escape }}"
                  class="w-full h-auto object-cover"
                  loading="lazy" width="100%" height="100%" />
              </picture>
            </a>
          </div>
        {% endif %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Responsive Banner",
  "blocks": [
    {
      "type": "banner",
      "name": "Banner",
      "settings": [
        { "type": "image_picker", "id": "desktop_image", "label": "Desktop Image" },
        { "type": "image_picker", "id": "mobile_image", "label": "Mobile Image" },
        { "type": "text", "id": "alt", "label": "Alt Text", "default": "Banner" },
        { "type": "url", "id": "link", "label": "Link (optional)" },
        {
          "type": "select",
          "id": "link_target",
          "label": "Link Target",
          "default": "_self",
          "options": [
            { "value": "_self", "label": "Open in same tab" },
            { "value": "_blank", "label": "Open in new tab" }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Responsive Banner",
      "category": "Image",
      "blocks": [{ "type": "banner" }]
    }
  ]
}
{% endschema %}
